// Generated by CoffeeScript 1.10.0
(function(window, $) {
  var win;
  win = $(window);
  $.fn.loading = function() {
    var el;
    el = $(this);
    return el.each(function() {
      el = $(this);
      el.data('loading-orig-html', el.html());
      return el.html($.template('loading'));
    });
  };
  $.fn.cancelLoading = function() {
    var el;
    el = $(this);
    return el.each(function() {
      var origHtml;
      origHtml = el.data('loading-orig-html');
      if (!origHtml) {
        return;
      }
      return el.html(origHtml);
    });
  };
  $.fn.rocaLoad = function() {
    var el;
    el = $(this);
    return el.each(function() {
      var target, url;
      el = $(this);
      url = el.attr('href');
      target = $("#" + (el.data('roca-target')));
      if (!target.length) {
        return;
      }
      return target.loading().load(url, function(res, status, xhr) {
        switch (xhr.status) {
          case 200:
            win.trigger('roca-load', [el, target]);
            break;
          default:
            ($(target)).cancelLoading();
            win.trigger('roca-error', [el, target]);
        }
      });
    });
  };
  return ($('a[data-roca-target]')).rocaLoad();
})(this, this.jQuery);
