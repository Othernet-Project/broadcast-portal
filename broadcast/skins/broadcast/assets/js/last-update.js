// Generated by CoffeeScript 1.10.0
(function(window, $) {
  var RELOAD_INTERVAL, body, lastUpdate, reloadState, stateReloaded, updateURL, win;
  RELOAD_INTERVAL = 5000;
  win = $(window);
  body = $('body');
  lastUpdate = parseInt(body.data('last-update'), 10);
  updateURL = body.data('update-url');
  stateReloaded = function(data) {
    if (lastUpdate === data.timestamp) {
      return;
    }
    win.trigger('state-update');
    lastUpdate = data.timestamp;
  };
  reloadState = function() {
    var res;
    return res = $.getJSON(updateURL, stateReloaded);
  };
  return setInterval(reloadState, RELOAD_INTERVAL);
})(this, this.jQuery);
