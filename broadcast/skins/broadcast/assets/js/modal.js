// Generated by CoffeeScript 1.10.0
(function(window, $) {
  var body, win;
  win = $(window);
  body = $(window.document.body);
  body.on('click', '.modal-close', function(e) {
    var el;
    el = $(this);
    return (el.parents('.modal')).remove();
  });
  return $.modal = function(name, url) {
    var modal, modalBody;
    modal = $($.template('modal', {
      name: name,
      url: url
    }));
    body.append(modal);
    modalBody = modal.find('.modal-body');
    modalBody.rocaLoad();
    win.on("modal-" + name + "-roca-load", function(e) {
      modal.css({
        'margin-left': -(modal.width() / 2),
        'margin-top': -(modal.height() / 2)
      });
      return win.trigger("modal-" + name + "-loaded");
    });
    return win.on("modal-" + name + "-submit", function(e) {
      var cleanUp;
      cleanUp = function() {
        var iframe;
        iframe = $("#modal-" + name + "-submit-frame");
        iframe.remove();
        modal.remove();
      };
      modal.fadeOut();
      return setTimeout(cleanUp, 3000);
    });
  };
})(this, this.jQuery);
